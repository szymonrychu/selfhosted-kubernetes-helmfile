repositories:
- name: szymonrychu
  url: https://szymonrychu.github.io/charts
templates:
  operators-default:
    disableValidation: true
    disableValidationOnInstall: true
  default: &default
    wait: true
    missingFileHandler: Warn
    timeout: 600
    hooks:
    - events:
      - prepare
      - presync
      - postsync
      showlogs: true
      command: ../../.hook.sh
      args:
      - '{{`{{ .Event.Name }}`}}'
      - '{{`{{ .Environment.Name }}`}}'
      - '{{`{{ .Release.Name }}`}}'
      - '{{`{{ .Release.Namespace }}`}}'
    values:
    - values/common.yaml
    - values/{{`{{ .Environment.Name }}`}}.yaml
    - values/{{`{{ .Release.Name }}`}}/common.yaml
    - values/{{`{{ .Release.Name }}`}}/{{`{{ .Environment.Name }}`}}.yaml
    secrets:
    - values/{{`{{ .Release.Name }}`}}/{{`{{ .Environment.Name }}`}}.secrets.yaml

releases:

# - name: intel-gpu-plugin
#   chart: truecharts/intel-gpu-plugin
#   namespace: kube-system
#   version: 4.4.2
#   labels:
#     purpose: media
#     application: intel-gpu-plugin
#   <<: *default

- name: samba
  chart: szymonrychu/samba
  version: 0.1.0
  namespace: samba
  labels:
    purpose: media
    application: samba
  <<: *default

- name: qbittorrent
  chart: szymonrychu/qbittorrent
  version: 0.3.2
  namespace: qbittorrent
  labels:
    purpose: media
    application: qbittorrent
  <<: *default

# - name: emby
#   chart: truecharts/emby
#   version: 11.0.42
#   namespace: emby
#   labels:
#     purpose: media
#     application: emby
#   <<: *default

- name: jellyfin
  chart: szymonrychu/jellyfin
  version: 0.3.2
  namespace: jellyfin
  labels:
    purpose: media
    application: jellyfin
  <<: *default

# - name: plex
#   chart: truecharts/plex
#   version: 10.2.20
#   namespace: plex
#   # needs:
#   # - kube-system/intel-gpu-plugin
#   labels:
#     purpose: media
#     application: plex
#   <<: *default
